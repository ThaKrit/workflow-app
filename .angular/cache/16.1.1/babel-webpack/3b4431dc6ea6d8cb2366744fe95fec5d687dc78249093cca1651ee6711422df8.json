{"ast":null,"code":"import _asyncToGenerator from \"/Users/kritkhao/Documents/learn_devpool/Dev/angula/workflow-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { environment } from 'src/app/environments/env.config';\nimport axios from 'axios';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../dashboard.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction TopBarComponent_tr_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const users_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", users_r1.username ? users_r1.username : \"login\", \" | \");\n  }\n}\nexport class TopBarComponent {\n  constructor(dashboard, router) {\n    this.dashboard = dashboard;\n    this.router = router;\n    this.jwtToken = null;\n    this.isLogin = false;\n    this.isUser = null;\n    this.items = [];\n    this.filterItems = [];\n    this.fetchItems();\n  }\n  ngOnInit() {\n    const authData = localStorage.getItem('authData');\n    if (authData) {\n      const parsedAuthData = JSON.parse(authData);\n      this.jwtToken = parsedAuthData.jwtToken;\n      this.isLogin = parsedAuthData.isLogin;\n      this.isUser = parsedAuthData.isUser;\n    }\n  }\n  fetchItems() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        const response = yield axios.get(`${environment.apiUrl}/users`);\n        _this.items = response.data;\n        _this.filterItems = _this.items.filter(user => user.username === _this.isUser);\n      } catch (error) {\n        _this.items = [];\n        _this.filterItems = [];\n      }\n    })();\n  }\n  openSidebar() {\n    this.dashboard.openSidebar();\n  }\n  logout() {\n    localStorage.removeItem('jwtToken');\n    localStorage.removeItem('authData');\n    sessionStorage.setItem('hasReloaded', 'false');\n  }\n}\nTopBarComponent.ɵfac = function TopBarComponent_Factory(t) {\n  return new (t || TopBarComponent)(i0.ɵɵdirectiveInject(i1.DashboardService), i0.ɵɵdirectiveInject(i2.Router));\n};\nTopBarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: TopBarComponent,\n  selectors: [[\"top-bar\"]],\n  decls: 13,\n  vars: 1,\n  consts: [[1, \"relative\", \"z-10\", \"h-16\", \"w-full\", \"items-center\", \"md:h-20\"], [1, \"relative\", \"mx-auto\", \"flex\", \"h-full\", \"flex-col\", \"justify-center\", \"px-3\"], [1, \"relative\", \"flex\", \"w-full\", \"items-center\", \"pl-1\", \"sm:ml-0\", \"sm:pr-2\"], [1, \"container\", \"relative\", \"left-0\", \"flex\", \"w-3/4\"], [1, \"group\", \"relative\", \"hidden\", \"h-full\", \"w-full\", \"items-center\", \"md:flex\", \"lg:w-64\"], [1, \"absolute\", \"flex\", \"cursor-pointer\", \"items-center\", \"justify-center\", \"p-3\", \"pr-2\", \"text-sm\", \"uppercase\", \"text-gray-500\", \"sm:hidden\"], [\"fill\", \"none\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"relative\", \"h-5\", \"w-5\"], [\"d\", \"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\"], [1, \"relative\", \"ml-5\", \"flex\", \"w-9/12\", \"items-center\", \"justify-end\", \"p-1\", \"sm:right-auto\", \"sm:mr-0\", \"md:w-1/4\"], [\"class\", \"relative block text-white\", 4, \"ngFor\", \"ngForOf\"], [\"href\", \"\", 3, \"click\"], [\"aria-hidden\", \"true\", \"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 16 16\", 1, \"w-4\", \"h-4\", \"text-gray-800\", \"dark:text-white\"], [\"stroke\", \"currentColor\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M4 8h11m0 0-4-4m4 4-4 4m-5 3H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h3\"], [1, \"relative\", \"block\", \"text-white\"]],\n  template: function TopBarComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"header\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5);\n      i0.ɵɵnamespaceSVG();\n      i0.ɵɵelementStart(6, \"svg\", 6);\n      i0.ɵɵelement(7, \"path\", 7);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵnamespaceHTML();\n      i0.ɵɵelementStart(8, \"div\", 8);\n      i0.ɵɵtemplate(9, TopBarComponent_tr_9_Template, 2, 1, \"tr\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"a\", 10);\n      i0.ɵɵlistener(\"click\", function TopBarComponent_Template_a_click_10_listener() {\n        return ctx.logout();\n      });\n      i0.ɵɵnamespaceSVG();\n      i0.ɵɵelementStart(11, \"svg\", 11);\n      i0.ɵɵelement(12, \"path\", 12);\n      i0.ɵɵelementEnd()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngForOf\", ctx.filterItems);\n    }\n  },\n  dependencies: [i3.NgForOf],\n  encapsulation: 2\n});","map":{"version":3,"names":["environment","axios","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","users_r1","username","TopBarComponent","constructor","dashboard","router","jwtToken","isLogin","isUser","items","filterItems","fetchItems","ngOnInit","authData","localStorage","getItem","parsedAuthData","JSON","parse","_this","_asyncToGenerator","response","get","apiUrl","data","filter","user","error","openSidebar","logout","removeItem","sessionStorage","setItem","ɵɵdirectiveInject","i1","DashboardService","i2","Router","selectors","decls","vars","consts","template","TopBarComponent_Template","rf","ctx","ɵɵnamespaceSVG","ɵɵelement","ɵɵnamespaceHTML","ɵɵtemplate","TopBarComponent_tr_9_Template","ɵɵlistener","TopBarComponent_Template_a_click_10_listener","ɵɵproperty"],"sources":["/Users/kritkhao/Documents/learn_devpool/Dev/angula/workflow-app/src/app/dashboard/top-bar/top-bar.component.ts","/Users/kritkhao/Documents/learn_devpool/Dev/angula/workflow-app/src/app/dashboard/top-bar/top-bar.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { DashboardService } from '../dashboard.service';\nimport { Item } from 'src/app/item/models/item';\nimport { environment } from 'src/app/environments/env.config';\nimport axios from 'axios';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'top-bar',\n  templateUrl: './top-bar.component.html',\n})\nexport class TopBarComponent implements OnInit {\n  jwtToken: string | null = null;\n  isLogin: boolean = false;\n  isUser: string | null = null;\n\n  items: any[] = [];\n  filterItems: any[] = [];\n\n  constructor(private dashboard: DashboardService, private router: Router) {\n    this.fetchItems();\n  }\n  ngOnInit() {\n    const authData = localStorage.getItem('authData');\n\n    if (authData) {\n      const parsedAuthData = JSON.parse(authData);\n      this.jwtToken = parsedAuthData.jwtToken;\n      this.isLogin = parsedAuthData.isLogin;\n      this.isUser = parsedAuthData.isUser;\n    }\n  }\n\n  async fetchItems() {\n    try {\n      const response = await axios.get<Item[]>(`${environment.apiUrl}/users`);\n      this.items = response.data;\n      this.filterItems = this.items.filter(\n        (user) => user.username === this.isUser\n      );\n    } catch (error) {\n      this.items = [];\n      this.filterItems = [];\n    }\n  }\n  openSidebar() {\n    this.dashboard.openSidebar();\n  }\n  logout() {\n    localStorage.removeItem('jwtToken');\n    localStorage.removeItem('authData');\n    sessionStorage.setItem('hasReloaded', 'false');\n  }\n}\n","<header class=\"relative z-10 h-16 w-full items-center md:h-20\">\n  <div class=\"relative mx-auto flex h-full flex-col justify-center px-3\">\n    <div class=\"relative flex w-full items-center pl-1 sm:ml-0 sm:pr-2\">\n      <div class=\"container relative left-0 flex w-3/4\">\n        \n        <div\n          class=\"group relative hidden h-full w-full items-center md:flex lg:w-64\"\n        >\n          <div\n            class=\"absolute flex cursor-pointer items-center justify-center p-3 pr-2 text-sm uppercase text-gray-500 sm:hidden\"\n          >\n            <svg\n              fill=\"none\"\n              class=\"relative h-5 w-5\"\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n              stroke-width=\"2\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                d=\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\"\n              />\n            </svg>\n          </div>\n          \n          \n          \n        </div>\n      </div>\n      <div\n        class=\"relative ml-5 flex w-9/12 items-center justify-end p-1 sm:right-auto sm:mr-0 md:w-1/4\"\n      >\n        \n        \n      <tr *ngFor=\"let users of filterItems; \" class=\"relative block text-white\">\n        {{ users.username ? users.username : 'login' }} | \n      </div>\n      <a href=\"\" (click)=\"logout()\">\n        <svg class=\"w-4 h-4 text-gray-800 dark:text-white\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\">\n          <path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 8h11m0 0-4-4m4 4-4 4m-5 3H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h3\"/>\n      </svg>\n      </a>\n    </div>\n  </div>\n</header>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}